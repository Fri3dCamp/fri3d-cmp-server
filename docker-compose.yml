version : '2'
services:
    api:
        build: ./api/
        links:
            - es:es
        ports:
            - "3100:3100"
        volumes:
            - ./api:/api
        env_file: env
    es:
        image: docker.elastic.co/elasticsearch/elasticsearch:5.5.1
        volumes:
            - ./es/data:/usr/share/elasticsearch/data
        ulimits:
            memlock:
                hard: -1
                soft: -1
        mem_limit: 1G
        environment:
            - cluster.name=docker-cluster
            - bootstrap.memory_lock=true
            - "ES_JAVA_OPTS=-Xms512m -Xmx512m"

